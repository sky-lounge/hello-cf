---
blueprint-uri: sky-lounge/public-skylounge-library/blueprints/gcp/cloud-run/blueprint.yml
params:
  main_branch: main
workflows:
- workflow: development
  params:
    build_paths: ["public","nginx.conf","skylounge","dev-manifest"]
    dev_endpoint: https://hello-cf-dev.de.a9sapp.eu
  jobs:
  - job: unit-test
    steps:
    - step: unit-test
      uri: sky-lounge/skylounge-library/steps/unit-test/nginx/unit-test.yml
  - job: deploy
    steps:
    - step: pre-deploy
      uri: sky-lounge/skylounge-library/steps/no-step/step.yml
    - step: deploy
      uri: sky-lounge/skylounge-library/steps/cloudfoundry/deploy/deploy.yml
      params:
        cf_api: https://api.de.a9s.eu
        cf_manifest: dev-manifest.yml
        cf_org: sgreenberg_rscale_io
        cf_password: "${{ secrets.CF_DEV_PASSWORD }}"
        cf_space: runner
        cf_username: "${{ secrets.CF_DEV_USERNAME }}"
  - job: integration-test
    uri: sky-lounge/hello-cf/skylounge/integration-test.yml
